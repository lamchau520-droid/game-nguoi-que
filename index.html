<!DOCTYPE html>
<html lang="vi">
<head>
<meta charset="UTF-8">
<title>Game Người Que</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<style>
body{ margin:0; background:black; }
canvas{
  display:block;
  margin:auto;
  background:#87ceeb;
}
</style>
</head>
<body>

<canvas id="game"></canvas>

<script>
const canvas = document.getElementById("game");
const ctx = canvas.getContext("2d");

canvas.width = 360;
canvas.height = 640;

// ===== LOAD ẢNH =====
const playerImg = new Image();
playerImg.src = "player_walk.png";

const groundImg = new Image();
groundImg.src = "ground.png";

// ===== PLAYER =====
const player = {
  x: 150,
  y: 500,
  w: 32,
  h: 32,
  frame: 0,
  tick: 0
};

playerImg.onload = () => {
  requestAnimationFrame(gameLoop);
};

function gameLoop(){
  ctx.clearRect(0,0,canvas.width,canvas.height);

  // NỀN
  ctx.fillStyle = "#87ceeb";
  ctx.fillRect(0,0,canvas.width,canvas.height);

  // GROUND
  for(let i=0;i<canvas.width;i+=32){
    ctx.drawImage(groundImg,i,canvas.height-32,32,32);
  }

  // ANIMATION
  player.tick++;
  if(player.tick > 10){
    player.frame = (player.frame + 1) % 4;
    player.tick = 0;
  }

  // VẼ NHÂN VẬT (CẮT FRAME)
  ctx.drawImage(
    playerImg,
    player.frame * 32, 0,   // ❗ QUAN TRỌNG
    32, 32,
    player.x, player.y,
    48, 48
  );

  requestAnimationFrame(gameLoop);
}
</script>

</body>
</html>
