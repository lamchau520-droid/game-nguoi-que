<!DOCTYPE html>
<html lang="vi">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Pixel World RPG</title>

<style>
body{
  margin:0;
  background:#000;
  overflow:hidden;
}
canvas{
  display:block;
  margin:auto;
  background:#8fd3ff;
}
#ui{
  position:fixed;
  top:10px;
  left:10px;
  color:white;
  background:rgba(0,0,0,0.6);
  padding:8px;
  border-radius:8px;
  font-size:14px;
}
.controls{
  position:fixed;
  bottom:20px;
  width:100%;
  display:flex;
  justify-content:center;
  gap:20px;
}
.btn{
  width:60px;
  height:60px;
  border-radius:12px;
  border:none;
  font-size:24px;
}
</style>
</head>

<body>

<div id="ui">
LV: 1<br>
HP: 100<br>
Pet: Slime
</div>

<canvas id="game" width="360" height="640"></canvas>

<div class="controls">
  <button class="btn" onclick="moveLeft()">←</button>
  <button class="btn" onclick="attack()">⚔</button>
  <button class="btn" onclick="moveRight()">→</button>
</div>

<script>
const canvas = document.getElementById("game");
const ctx = canvas.getContext("2d");

// ===== PLAYER =====
const player = {
  x: 160,
  y: 420,
  w: 32,
  h: 32,
  speed: 2,
  dir: "right",
  moving: false,
  frame: 0,
  tick: 0
};

// ===== LOAD IMAGES =====
const imgIdle = new Image();
imgIdle.src = "player_idle.png";

const imgRun1 = new Image();
imgRun1.src = "player_run1.png";

const imgRun2 = new Image();
imgRun2.src = "player_run2.png";

// ===== DRAW PLAYER =====
function drawPlayer(){
  let img = imgIdle;

  if(player.moving){
    img = player.frame === 0 ? imgRun1 : imgRun2;
  }

  if(img.complete && img.naturalWidth > 0){
    ctx.drawImage(img, player.x, player.y, player.w, player.h);
  }else{
    // fallback pixel nếu chưa có ảnh
    ctx.fillStyle = "#7b3ff2";
    ctx.fillRect(player.x, player.y, player.w, player.h);
  }
}

// ===== CONTROLS =====
function moveLeft(){
  player.x -= player.speed;
  player.dir = "left";
  player.moving = true;
}
function moveRight(){
  player.x += player.speed;
  player.dir = "right";
  player.moving = true;
}
function attack(){
  alert("Đánh!");
}

// ===== GAME LOOP =====
function gameLoop(){
  ctx.clearRect(0,0,canvas.width,canvas.height);

  // SKY
  ctx.fillStyle = "#8fd3ff";
  ctx.fillRect(0,0,canvas.width,canvas.height);

  // GROUND
  ctx.fillStyle = "#1f7a1f";
  ctx.fillRect(0,480,canvas.width,160);

  // ANIMATION
  player.tick++;
  if(player.tick > 15){
    player.frame = (player.frame + 1) % 2;
    player.tick = 0;
  }

  drawPlayer();

  player.moving = false;
  requestAnimationFrame(gameLoop);
}

gameLoop();
</script>

</body>
</html>

